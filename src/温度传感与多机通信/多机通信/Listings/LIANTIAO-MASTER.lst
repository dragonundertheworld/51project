A51 MACRO ASSEMBLER  LIANTIAO_MASTER                                                      05/08/2022 22:18:02 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\LIANTIAO-MASTER.obj
ASSEMBLER INVOKED BY: D:\KEIL\C51\BIN\A51.EXE LIANTIAO-MASTER.a51 SET(SMALL) DEBUG PRINT(.\Listings\LIANTIAO-MASTER.lst)
                       OBJECT(.\Objects\LIANTIAO-MASTER.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;主机串口初始化
0000 7598F0            2     S_INIT: MOV SCON,#0F0H
                       3     ;11110000->5C0N
                       4     ;使能串口收发，并设置工作在模式三
0003 758920            5     MOV TMOD, #20H
                       6     ;设置定时器11为工作模式2
0006 758DFD            7     MOV TH1,#0FDH
                       8     ;波特率设置为9600
0009 758BFD            9     MOV TL1,#0FDH
000C D28E             10     SETB TR1
                      11     ;主机发送地址
000E D29B             12     SEND_ADDR: SETB TB8
                      13     ;置位IB8，使主机成为发送地址模式
0010 3099FD           14     JNB TI, $
                      15     ;判断发送缓冲区是否为空?
0013 C299             16     CLR TI
0015 7401             17     MOV A,#1
0017 F599             18     MOV SBUF, A ;发送从机地址
                      19     ;从机检测是否接收到应答信号
0019                  20     CHECK:
0019 3098FD           21     JNB RI, $
001C C298             22     CLR RI
001E E599             23     MOV A, SBUF
0020 B40100           24     CJNE A, #1, FAIL
                      25     ;收到应答信号不正确
0023 0123             26     FAIL:AJMP FAIL
                      27     ;主机发送数据
0025 7455             28     SEND_DATA: MOV A,#01010101B;(数据)
0027 A2D0             29     MOV C, P
0029 B3               30     CPL C
002A 92E7             31     MOV ACC.7, C;生成最终要 发送的数据到A
002C 3099FD           32     JNB TI,$
002F C299             33     CLR TI
0031 C29B             34     CLR TB8
                      35     ;清零IB8，使主机进入发送数据状态
0033 F599             36     MOV SBUF, A
0035 C2E7             37     CLR ACC.7
0037 22               38     RET
                      39     
                      40     END
A51 MACRO ASSEMBLER  LIANTIAO_MASTER                                                      05/08/2022 22:18:02 PAGE     2

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
CHECK. . . . . . .  C ADDR   0019H   A   
FAIL . . . . . . .  C ADDR   0023H   A   
P. . . . . . . . .  B ADDR   00D0H.0 A   
RI . . . . . . . .  B ADDR   0098H.0 A   
SBUF . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . .  D ADDR   0098H   A   
SEND_ADDR. . . . .  C ADDR   000EH   A   
SEND_DATA. . . . .  C ADDR   0025H   A   
S_INIT . . . . . .  C ADDR   0000H   A   
TB8. . . . . . . .  B ADDR   0098H.3 A   
TH1. . . . . . . .  D ADDR   008DH   A   
TI . . . . . . . .  B ADDR   0098H.1 A   
TL1. . . . . . . .  D ADDR   008BH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR1. . . . . . . .  B ADDR   0088H.6 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
