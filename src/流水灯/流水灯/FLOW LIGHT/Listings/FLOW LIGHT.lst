A51 MACRO ASSEMBLER  FLOW_LIGHT                                                           04/28/2022 17:18:43 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\FLOW LIGHT.obj
ASSEMBLER INVOKED BY: D:\KEIL\C51\BIN\A51.EXE FLOW LIGHT.a51 SET(SMALL) DEBUG PRINT(.\Listings\FLOW LIGHT.lst) OBJECT(.\
                      Objects\FLOW LIGHT.obj) EP

LOC  OBJ            LINE     SOURCE

0000                   1     ORG 0000H
0000 020100            2             LJMP MAIN
0003                   3     ORG 0003H
0003 02020C            4             LJMP PINT1
                       5     
0100                   6     ORG 0100H
0100                   7     MAIN:
0100 75815F            8     MOV SP,#5FH
0103 758911            9     MOV TMOD,#00010001B;TMOD:GATE(T1ÊòØÂê¶ÂèóINT1,INT0ÂΩ±Âìç),C/T,M1,M0,GATE(T0ÊòØÂê¶ÂèóINT1,IN
                             T0ÂΩ±Âìç),C/T,M1,M0
0106 C288             10     CLR IT0;INT0Ê®°ÂºèÈÄâÊã©
0108 D2AF             11     SETB EA;ÊÄªÂÖÅËÆ∏
010A D2A8             12     SETB EX0;INT0Ê∫êÂÖÅËÆ∏
010C 75A000           13     MOV P2,#00000000B;‰∏ªÁ®ãÂ∫è
010F 759000           14     MOV P1,#00000000B
0112 120334           15     LCALL LDELAY
0115 75A0FF           16     MOV P2,#11111111B;‰∏ªÁ®ãÂ∫è
0118 7590FF           17     MOV P1,#11111111B
011B 120334           18     LCALL LDELAY
011E                  19     MAINPART1:
011E 74FE             20     MOV A, #11111110B
0120 7E07             21     MOV R6,#7
0122 F5A0             22     MOV P2,A
0124 F590             23     MOV P1,A
0126 120334           24     LCALL LDELAY
0129                  25     MAINLEFT1:
0129 23               26     RL A
012A F5A0             27     MOV P2,A
012C F590             28     MOV P1,A
012E 120334           29     LCALL LDELAY
0131 DEF6             30     DJNZ R6,MAINLEFT1
0133 7E06             31     MOV R6,#6
0135                  32     MAINRIGHT1:
0135 03               33     RR A
0136 F5A0             34     MOV P2,A
0138 F590             35     MOV P1,A
013A 120334           36     LCALL LDELAY
013D DEF6             37     DJNZ R6,MAINRIGHT1
                      38     
013F                  39     MAINPART2:
013F 74FC             40     MOV A, #11111100B
0141 7E06             41     MOV R6,#6
0143 F5A0             42     MOV P2,A
0145 F590             43     MOV P1,A
0147 120334           44     LCALL LDELAY
014A                  45     MAINLEFT2:
014A 23               46     RL A
014B F5A0             47     MOV P2,A
014D F590             48     MOV P1,A
014F 120334           49     LCALL LDELAY
0152 DEF6             50     DJNZ R6,MAINLEFT2
0154 7E05             51     MOV R6,#5
0156                  52     MAINRIGHT2:
0156 03               53     RR A
0157 F5A0             54     MOV P2,A
0159 F590             55     MOV P1,A
015B 120334           56     LCALL LDELAY
A51 MACRO ASSEMBLER  FLOW_LIGHT                                                           04/28/2022 17:18:43 PAGE     2

015E DEF6             57     DJNZ R6,MAINRIGHT2
                      58     
0160                  59     MAINPART3:
0160 75A0DE           60     MOV P2, #11011110B
0163 7590DE           61     MOV P1, #11011110B
0166 120334           62     LCALL LDELAY
                      63     
0169 75A0BD           64     MOV P2, #10111101B
016C 7590BD           65     MOV P1, #10111101B
016F 120334           66     LCALL LDELAY
                      67     
0172 75A07B           68     MOV P2, #01111011B
0175 75907B           69     MOV P1, #01111011B
0178 120334           70     LCALL LDELAY
                      71     
017B 75A0F7           72     MOV P2, #11110111B
017E 7590F7           73     MOV P1, #11110111B
0181 120334           74     LCALL LDELAY
                      75     
0184 75A0EF           76     MOV P2, #11101111B
0187 7590EF           77     MOV P1, #11101111B
018A 120334           78     LCALL LDELAY
                      79     
018D                  80     MAINPART33:
018D 75A0BD           81     MOV P2, #10111101B
0190 7590BD           82     MOV P1, #10111101B
0193 120334           83     LCALL LDELAY
                      84     
0196 75A0DE           85     MOV P2, #11011110B
0199 7590DE           86     MOV P1, #11011110B
019C 120334           87     LCALL LDELAY
                      88     
019F 75A0EE           89     MOV P2, #11101110B
01A2 7590EE           90     MOV P1, #11101110B
01A5 120334           91     LCALL LDELAY
                      92     
01A8 75A0F7           93     MOV P2, #11110111B
01AB 7590F7           94     MOV P1, #11110111B
01AE 120334           95     LCALL LDELAY
                      96     
01B1 75A0BD           97     MOV P2, #10111101B
01B4 7590BD           98     MOV P1, #10111101B
01B7 120334           99     LCALL LDELAY
                     100     
01BA 75A0DE          101     MOV P2, #11011110B
01BD 7590DE          102     MOV P1, #11011110B
01C0 120334          103     LCALL LDELAY
                     104     
01C3                 105     MAINPART4:
01C3 7590FF          106     MOV P1,#0FFH
01C6 74FE            107     MOV A, #11111110B
01C8 7E07            108     MOV R6,#7
01CA F5A0            109     MOV P2,A
01CC 120334          110     LCALL LDELAY
01CF                 111     MAINLEFT4:
01CF 23              112     RL A
01D0 F5A0            113     MOV P2,A
01D2 120334          114     LCALL LDELAY
01D5 DEF8            115     DJNZ R6,MAINLEFT4
01D7 75A0FF          116     MOV P2,#11111111B
                     117     
01DA 74FE            118     MOV A, #11111110B
01DC 7E07            119     MOV R6,#7
01DE F590            120     MOV P1,A
01E0 120334          121     LCALL LDELAY
01E3                 122     MAINRIGHT4:
A51 MACRO ASSEMBLER  FLOW_LIGHT                                                           04/28/2022 17:18:43 PAGE     3

01E3 23              123     RL A
01E4 F590            124     MOV P1,A
01E6 120334          125     LCALL LDELAY
01E9 DEF8            126     DJNZ R6,MAINRIGHT4
01EB 7E07            127     MOV R6,#7
01ED                 128     MAINLEFT42:
01ED 03              129     RR A
01EE F590            130     MOV P1,A
01F0 120334          131     LCALL LDELAY
01F3 DEF8            132     DJNZ R6,MAINLEFT42
01F5 7590FF          133     MOV P1,#11111111B
                     134     
01F8 747F            135     MOV A, #01111111B
01FA 7E07            136     MOV R6,#7
01FC F5A0            137     MOV P2,A
01FE 120334          138     LCALL LDELAY
0201                 139     MAINRIGHT42:
0201 03              140     RR A
0202 F5A0            141     MOV P2,A
0204 120334          142     LCALL LDELAY
0207 DEF8            143     DJNZ R6,MAINRIGHT42
0209 020100          144     LJMP MAIN
                     145     
020C                 146     PINT1:
020C 7590FF          147         MOV P1,#0FFH
020F 75A0FF          148             MOV P2,#0FFH
0212 8983            149             MOV DPH,R1
0214 C083            150             PUSH DPH
0216 C0E0            151             PUSH ACC
0218 208003          152             JB P0.0,JUDGE1
021B 30800C          153             JNB P0.0,JUDGE2
021E 208103          154     JUDGE1: JB P0.1,TRANS0_1
0221 308103          155                     JNB P0.1,TRANS0_2
0224 02023D          156                     TRANS0_1:LJMP PART1
0227 020261          157                     TRANS0_2:LJMP PART2             
                     158                     
022A 208103          159     JUDGE2: JB P0.1,TRANS0_3
022D 308103          160                     JNB P0.1,TRANS0_4
0230 020285          161                     TRANS0_3:LJMP PART3
0233 0202EB          162                     TRANS0_4:LJMP PART4             
0236                 163     PINTR:
0236 D0E0            164     POP ACC
0238 D083            165     POP DPH
023A A983            166     MOV R1,DPH
023C 32              167     RETI
                     168     
023D                 169     PART1:
023D 74FE            170     MOV A, #11111110B
023F 7E07            171     MOV R6,#7
0241 F5A0            172     MOV P2,A
0243 F590            173     MOV P1,A
0245 120334          174     LCALL LDELAY
0248                 175     LEFT1:
0248 23              176     RL A
0249 F5A0            177     MOV P2,A
024B F590            178     MOV P1,A
024D 120334          179     LCALL LDELAY
0250 DEF6            180     DJNZ R6,LEFT1
0252 7E06            181     MOV R6,#6
0254                 182     RIGHT1:
0254 03              183     RR A
0255 F5A0            184     MOV P2,A
0257 F590            185     MOV P1,A
0259 120334          186     LCALL LDELAY
025C DEF6            187     DJNZ R6,RIGHT1
025E 020236          188     LJMP PINTR
A51 MACRO ASSEMBLER  FLOW_LIGHT                                                           04/28/2022 17:18:43 PAGE     4

                     189     
0261                 190     PART2:
0261 74FC            191     MOV A, #11111100B
0263 7E06            192     MOV R6,#6
0265 F5A0            193     MOV P2,A
0267 F590            194     MOV P1,A
0269 120334          195     LCALL LDELAY
026C                 196     LEFT2:
026C 23              197     RL A
026D F5A0            198     MOV P2,A
026F F590            199     MOV P1,A
0271 120334          200     LCALL LDELAY
0274 DEF6            201     DJNZ R6,LEFT2
0276 7E05            202     MOV R6,#5
0278                 203     RIGHT2:
0278 03              204     RR A
0279 F5A0            205     MOV P2,A
027B F590            206     MOV P1,A
027D 120334          207     LCALL LDELAY
0280 DEF6            208     DJNZ R6,RIGHT2
0282 020236          209     LJMP PINTR
                     210     
0285                 211     PART3:
0285 75A0DE          212     MOV P2, #11011110B
0288 7590DE          213     MOV P1, #11011110B
028B 120334          214     LCALL LDELAY
                     215     
028E 75A0BD          216     MOV P2, #10111101B
0291 7590BD          217     MOV P1, #10111101B
0294 120334          218     LCALL LDELAY
                     219     
0297 75A07B          220     MOV P2, #01111011B
029A 75907B          221     MOV P1, #01111011B
029D 120334          222     LCALL LDELAY
                     223     
02A0 75A0F7          224     MOV P2, #11110111B
02A3 7590F7          225     MOV P1, #11110111B
02A6 120334          226     LCALL LDELAY
                     227     
02A9 75A0EF          228     MOV P2, #11101111B
02AC 7590EF          229     MOV P1, #11101111B
02AF 120334          230     LCALL LDELAY
                     231     
02B2                 232     PART33:
02B2 75A0BD          233     MOV P2, #10111101B
02B5 7590BD          234     MOV P1, #10111101B
02B8 120334          235     LCALL LDELAY
                     236     
02BB 75A0DE          237     MOV P2, #11011110B
02BE 7590DE          238     MOV P1, #11011110B
02C1 120334          239     LCALL LDELAY
                     240     
02C4 75A0EE          241     MOV P2, #11101110B
02C7 7590EE          242     MOV P1, #11101110B
02CA 120334          243     LCALL LDELAY
                     244     
02CD 75A0F7          245     MOV P2, #11110111B
02D0 7590F7          246     MOV P1, #11110111B
02D3 120334          247     LCALL LDELAY
                     248     
02D6 75A0BD          249     MOV P2, #10111101B
02D9 7590BD          250     MOV P1, #10111101B
02DC 120334          251     LCALL LDELAY
                     252     
02DF 75A0DE          253     MOV P2, #11011110B
02E2 7590DE          254     MOV P1, #11011110B
A51 MACRO ASSEMBLER  FLOW_LIGHT                                                           04/28/2022 17:18:43 PAGE     5

02E5 120334          255     LCALL LDELAY
02E8 020236          256     LJMP PINTR
                     257     
02EB                 258     PART4:
02EB 7590FF          259     MOV P1,#0FFH
02EE 74FE            260     MOV A, #11111110B
02F0 7E07            261     MOV R6,#7
02F2 F5A0            262     MOV P2,A
02F4 120334          263     LCALL LDELAY
02F7                 264     LEFT4:
02F7 23              265     RL A
02F8 F5A0            266     MOV P2,A
02FA 120334          267     LCALL LDELAY
02FD DEF8            268     DJNZ R6,LEFT4
02FF 75A0FF          269     MOV P2,#11111111B
                     270     
0302 74FE            271     MOV A, #11111110B
0304 7E07            272     MOV R6,#7
0306 F590            273     MOV P1,A
0308 120334          274     LCALL LDELAY
030B                 275     RIGHT4:
030B 23              276     RL A
030C F590            277     MOV P1,A
030E 120334          278     LCALL LDELAY
0311 DEF8            279     DJNZ R6,RIGHT4
0313 7E07            280     MOV R6,#7
0315                 281     LEFT42:
0315 03              282     RR A
0316 F590            283     MOV P1,A
0318 120334          284     LCALL LDELAY
031B DEF8            285     DJNZ R6,LEFT42
031D 7590FF          286     MOV P1,#11111111B
                     287     
0320 747F            288     MOV A, #01111111B
0322 7E07            289     MOV R6,#7
0324 F5A0            290     MOV P2,A
0326 120334          291     LCALL LDELAY
0329                 292     RIGHT42:
0329 03              293     RR A
032A F5A0            294     MOV P2,A
032C 120334          295     LCALL LDELAY
032F DEF8            296     DJNZ R6,RIGHT42
0331 020236          297     LJMP PINTR
                     298     
0334                 299     LDELAY:
0334 7904            300      MOV R1,#4
0336 020339          301      LJMP DELAY
                     302      
0339                 303     DELAY:
0339 758C3C          304     MOV TH0,#3CH
033C 758AB0          305     MOV TL0,#0B0H;T1(P3.5)=TH1+TL1;50ms=0.05s
033F D28C            306     SETB TR0;ÂêØÂä®ÂÆöÊó∂Âô®;TCON:TF1(T1Ê∫¢Âá∫Ê†áÂøó‰Ωç),TR1(T1ÂêØÂÅúÊéßÂà∂‰Ωç)=0,TF0(T0Ê∫¢Âá∫Ê
                             †áÂøó‰Ωç),TR0(T0ÂêØÂÅúÊéßÂà∂‰Ωç),IE1,IT1,IE0,IT0
0341 308DFD          307     JNB TF0,$
0344 C28D            308     CLR TF0
0346 D9F1            309     DJNZ R1,DELAY
0348 22              310     RET
                     311     
                     312     
                     313     END
A51 MACRO ASSEMBLER  FLOW_LIGHT                                                           04/28/2022 17:18:43 PAGE     6

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
DELAY. . . . . . .  C ADDR   0339H   A   
DPH. . . . . . . .  D ADDR   0083H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
JUDGE1 . . . . . .  C ADDR   021EH   A   
JUDGE2 . . . . . .  C ADDR   022AH   A   
LDELAY . . . . . .  C ADDR   0334H   A   
LEFT1. . . . . . .  C ADDR   0248H   A   
LEFT2. . . . . . .  C ADDR   026CH   A   
LEFT4. . . . . . .  C ADDR   02F7H   A   
LEFT42 . . . . . .  C ADDR   0315H   A   
MAIN . . . . . . .  C ADDR   0100H   A   
MAINLEFT1. . . . .  C ADDR   0129H   A   
MAINLEFT2. . . . .  C ADDR   014AH   A   
MAINLEFT4. . . . .  C ADDR   01CFH   A   
MAINLEFT42 . . . .  C ADDR   01EDH   A   
MAINPART1. . . . .  C ADDR   011EH   A   
MAINPART2. . . . .  C ADDR   013FH   A   
MAINPART3. . . . .  C ADDR   0160H   A   
MAINPART33 . . . .  C ADDR   018DH   A   
MAINPART4. . . . .  C ADDR   01C3H   A   
MAINRIGHT1 . . . .  C ADDR   0135H   A   
MAINRIGHT2 . . . .  C ADDR   0156H   A   
MAINRIGHT4 . . . .  C ADDR   01E3H   A   
MAINRIGHT42. . . .  C ADDR   0201H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
PART1. . . . . . .  C ADDR   023DH   A   
PART2. . . . . . .  C ADDR   0261H   A   
PART3. . . . . . .  C ADDR   0285H   A   
PART33 . . . . . .  C ADDR   02B2H   A   
PART4. . . . . . .  C ADDR   02EBH   A   
PINT1. . . . . . .  C ADDR   020CH   A   
PINTR. . . . . . .  C ADDR   0236H   A   
RIGHT1 . . . . . .  C ADDR   0254H   A   
RIGHT2 . . . . . .  C ADDR   0278H   A   
RIGHT4 . . . . . .  C ADDR   030BH   A   
RIGHT42. . . . . .  C ADDR   0329H   A   
SP . . . . . . . .  D ADDR   0081H   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TRANS0_1 . . . . .  C ADDR   0224H   A   
TRANS0_2 . . . . .  C ADDR   0227H   A   
TRANS0_3 . . . . .  C ADDR   0230H   A   
TRANS0_4 . . . . .  C ADDR   0233H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
