MOV P3,#11111111B
KEY1 BIT P0.0 //
KEY2 BIT P0.1

JUDGE0:	JB KEY1,JUDGE1
		JNB KEY1,JUDGE2

JUDGE1:	JB KEY2,TRANS0_1
		JNB KEY2,TRANS0_2
		TRANS0_1:LJMP PART1
		TRANS0_2:LJMP PART2		
		
JUDGE2:	JB KEY2,TRANS0_3
		JNB KEY2,TRANS0_4
		TRANS0_3:LJMP PART3
		TRANS0_4:LJMP PART4

PART1:
MOV A, #11111110B
MOV R6,#7
MOV P2,A
MOV P1,A
LCALL DELAY
LEFT1:
JNB KEY1,TRANS1
JNB KEY2,TRANS1
RL A
MOV P2,A
MOV P1,A
LCALL DELAY
DJNZ R6,LEFT1
MOV R6,#6
RIGHT1:
JNB KEY1,TRANS1
JNB KEY2,TRANS1
RR A
MOV P2,A
MOV P1,A
LCALL DELAY
DJNZ R6,RIGHT1

LJMP PART1
TRANS1:LJMP JUDGE0

PART2:
MOV A, #11111100B
MOV R6,#6
MOV P2,A
MOV P1,A
LCALL DELAY
LEFT2:
JNB KEY1,TRANS2
JB KEY2,TRANS2
RL A
MOV P2,A
MOV P1,A
LCALL DELAY
DJNZ R6,LEFT2
MOV R6,#5
RIGHT2:
JNB KEY1,TRANS2
JB KEY2,TRANS2
RR A
MOV P2,A
MOV P1,A
LCALL DELAY
DJNZ R6,RIGHT2

LJMP PART2
TRANS2:LJMP JUDGE0

PART3:
MOV P2, #11011110B
MOV P1, #11011110B
LCALL LDELAY
JB KEY1,TRANS3
JNB KEY2,TRANS3

MOV P2, #10111101B
MOV P1, #10111101B
LCALL LDELAY
JB KEY1,TRANS3
JNB KEY2,TRANS3

MOV P2, #01111011B
MOV P1, #01111011B
LCALL LDELAY
JB KEY1,TRANS3
JNB KEY2,TRANS3

MOV P2, #11110111B
MOV P1, #11110111B
LCALL LDELAY
JB KEY1,TRANS3
JNB KEY2,TRANS3

MOV P2, #11101111B
MOV P1, #11101111B
LCALL LDELAY
JB KEY1,TRANS3
JNB KEY2,TRANS3

SJMP PART33
TRANS3:LJMP JUDGE0

PART33:
MOV P2, #10111101B
MOV P1, #10111101B
LCALL DELAY
JB KEY1,TRANS33
JNB KEY2,TRANS33

MOV P2, #11011110B
MOV P1, #11011110B
LCALL DELAY
JB KEY1,TRANS33
JNB KEY2,TRANS33

MOV P2, #11101110B
MOV P1, #11101110B
LCALL DELAY
JB KEY1,TRANS33
JNB KEY2,TRANS33

MOV P2, #11110111B
MOV P1, #11110111B
LCALL DELAY
JB KEY1,TRANS33
JNB KEY2,TRANS33

MOV P2, #10111101B
MOV P1, #10111101B
LCALL DELAY
JB KEY1,TRANS33
JNB KEY2,TRANS33

MOV P2, #11011110B
MOV P1, #11011110B
LCALL DELAY
JB KEY1,TRANS33
JNB KEY2,TRANS33
 
 

lJMP PART3
TRANS33:LJMP JUDGE0

PART4:
MOV P1,#0FFH
MOV A, #11111110B
MOV R6,#7
MOV P2,A
LCALL DELAY
LEFT4:
JB KEY1,TRANS4
JB KEY2,TRANS4
RL A
MOV P2,A
LCALL DELAY
DJNZ R6,LEFT4
MOV P2,#11111111B

MOV A, #01111111B
MOV R6,#7
MOV P1,A
LCALL DELAY
RIGHT4:
JB KEY1,TRANS4
JB KEY2,TRANS4
RR A
MOV P1,A
LCALL DELAY
DJNZ R6,RIGHT4
MOV R6,#7
LEFT42:
RL A
MOV P1,A
LCALL DELAY
DJNZ R6,LEFT42
MOV P1,#11111111B

MOV A, #01111111B
MOV R6,#6
MOV P2,A
LCALL DELAY
RIGHT42:
JB KEY1,TRANS4
JB KEY2,TRANS4
RR A
MOV P2,A
LCALL DELAY
DJNZ R6,RIGHT42

SJMP PART4
TRANS4:LJMP JUDGE0

DELAY:
MOV	R7, #3	;@11.0592MHz
D1:
PUSH 30H
PUSH 31H
MOV 30H, #90 ;1s=180
MOV 31H, #68
NEXT:
DJNZ 31H, NEXT
DJNZ 30H, NEXT
POP 31H
POP 30H
DJNZ R7, D1
RET

LDELAY:
MOV	R7, #3	;@11.0592MHz
LD1:
PUSH 30H
PUSH 31H
MOV 30H, #180 ;1s=180
MOV 31H, #68
LNEXT:
DJNZ 31H, LNEXT
DJNZ 30H, LNEXT
POP 31H
POP 30H
DJNZ R7, LD1
RET


END